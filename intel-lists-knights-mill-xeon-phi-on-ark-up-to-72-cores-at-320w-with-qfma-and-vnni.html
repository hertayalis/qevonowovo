<!doctype html><html lang=en><head><meta charset=utf-8><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Today it was noticed, without any fanfare from Intel, that Knights Mill information has been uploaded to Intels specification database ARK. There are three known SKUs so far, with up to 72 cores and a 320W TDP. The Xeon Phi 'Knights Mill' products are a new iteration on the older 'Knights Landing' family, with a"><meta name=robots content="index,follow,noarchive"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel=stylesheet media=print type=text/css onload='this.media="all"'><title>Up to 72 cores at 320W with QFMA and VNNI</title><link rel=canonical href=./intel-lists-knights-mill-xeon-phi-on-ark-up-to-72-cores-at-320w-with-qfma-and-vnni.html><style>*{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;color:#000;text-decoration-skip:ink}body{font-family:open sans,myriad pro,Myriad,sans-serif;font-size:17px;line-height:160%;color:#1d1313;max-width:700px;margin:auto}p{margin:20px 0}a img{border:none}img{margin:10px auto;max-width:100%;display:block}.left-justify{float:left}.right-justify{float:right}pre,code{font:12px Consolas,liberation mono,Menlo,Courier,monospace;background-color:#f7f7f7}code{font-size:12px;padding:4px}pre{margin-top:0;margin-bottom:16px;word-wrap:normal;padding:16px;overflow:auto;font-size:85%;line-height:1.45}pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}pre code{display:inline;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code::before,pre code::after{content:normal}em,q,em,dfn{font-style:italic}.sans,html .gist .gist-file .gist-meta{font-family:open sans,myriad pro,Myriad,sans-serif}.mono,pre,code,tt,p code,li code{font-family:Menlo,Monaco,andale mono,lucida console,courier new,monospace}.heading,.serif,h1,h2,h3{font-family:old standard tt,serif}strong{font-weight:600}q:before{content:"\201C"}q:after{content:"\201D"}del,s{text-decoration:line-through}blockquote{font-family:old standard tt,serif;text-align:center;padding:50px}blockquote p{display:inline-block;font-style:italic}blockquote:before,blockquote:after{font-family:old standard tt,serif;content:'\201C';font-size:35px;color:#403c3b}blockquote:after{content:'\201D'}hr{width:40%;height:1px;background:#403c3b;margin:25px auto}h1{font-size:35px}h2{font-size:28px}h3{font-size:22px;margin-top:18px}h1 a,h2 a,h3 a{text-decoration:none}h1,h2{margin-top:28px}#sub-header,.date{color:#403c3b;font-size:13px}#sub-header{margin:0 4px}#nav h1 a{font-size:35px;color:#1d1313;line-height:120%}.posts_listing a,#nav a{text-decoration:none}li{margin-left:20px}ul li{margin-left:5px}ul li{list-style-type:none}ul li:before{content:"\00BB \0020"}#nav ul li:before,.posts_listing li:before{content:'';margin-right:0}#content{text-align:left;width:100%;font-size:15px;padding:60px 0 80px}#content h1,#content h2{margin-bottom:5px}#content h2{font-size:25px}#content .entry-content{margin-top:15px}#content .date{margin-left:3px}#content h1{font-size:30px}.highlight{margin:10px 0}.posts_listing{margin:0 0 50px}.posts_listing li{margin:0 0 25px 15px}.posts_listing li a:hover,#nav a:hover{text-decoration:underline}#nav{text-align:center;position:static;margin-top:60px}#nav ul{display:table;margin:8px auto 0}#nav li{list-style-type:none;display:table-cell;font-size:15px;padding:0 20px}#links{display:flex;justify-content:space-between;margin:50px 0 0}#links :nth-child(1){margin-right:.5em}#links :nth-child(2){margin-left:.5em}#not-found{text-align:center}#not-found a{font-family:old standard tt,serif;font-size:200px;text-decoration:none;display:inline-block;padding-top:225px}@media(max-width:750px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:28px}#nav li{font-size:13px;padding:0 15px}#content{margin-top:0;padding-top:50px;font-size:14px}#content h1{font-size:25px}#content h2{font-size:22px}.posts_listing li div{font-size:12px}}@media(max-width:400px){body{padding-left:20px;padding-right:20px}#nav h1 a{font-size:22px}#nav li{font-size:12px;padding:0 10px}#content{margin-top:0;padding-top:20px;font-size:12px}#content h1{font-size:20px}#content h2{font-size:18px}.posts_listing li div{font-size:12px}}@media(prefers-color-scheme:dark){*,#nav h1 a{color:#fdfdfd}body{background:#121212}pre,code{background-color:#262626}#sub-header,.date{color:#bababa}hr{background:#ebebeb}}</style></head><body><section id=nav><h1><a href=./index.html>ZBlogY</a></h1><ul><li><a href=./index.xml>Rss</a></li><li><a href=./sitemap.xml>Sitemap</a></li></ul></section><section id=content><h1>Up to 72 cores at 320W with QFMA and VNNI</h1><div id=sub-header>August 2024 · 6 minute read</div><div class=entry-content><p>Today it was noticed, without any fanfare from Intel, that Knights Mill information has been uploaded to Intel’s specification database ARK. There are three known SKUs so far, with up to 72 cores and a 320W TDP. The Xeon Phi 'Knights Mill' products are a new iteration on the older 'Knights Landing' family, with a silicon change for additional AVX-512 instructions. As far as we can tell, these parts will only be available as socketable hosts and not as PCIe add-in cards.</p><p>In Intel’s approach to AI and compute and the data center, according to their&nbsp;<a href=#>talk at Hot Chips</a>&nbsp;earlier this year, has multiple solutions depending on the workload. The Xeon Scalable Platform is meant for the widest variety of workloads, Xeon Phi for parallel acceleration and AI training, FPGAs for deep learning inference efficiency and the Crest family with dedicated deep learning by design. Each segment has its own roadmap, and the Xeon Phi roadmap has been somewhat confusing of late.</p><p>Moving from the 45nm Knights Ferry in 2010, Intel released 22nm Knights Corner in 2012 and 14nm Knights Landing in 2016. Last year, Intel had a contract with the Argonne National Laboratory to build the Aurora supercomputer at using 10nm Knights Hill (KNH) by 2020, which was the original successor to Knights Landing, however the KNH project was officially scrapped last month (Nov 2017) for various reasons, some citing Intel’s delay in releasing 10nm silicon. Intel still intends to follow through with the Aurora contract by 2021, it should be noted.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-004.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>The new successor to Knights Landing (KNL) is Knights Mill (KNM), which was detailed back at Hot Chips. For the most part, the KNL and KNM chips are almost identical in core counts, frequencies, 36 PCIe 3.0 lanes, using 16GB of high-bandwidth MCDRAM and having six DRAM channels, but KNM offers a small design tweak to allow for better utilization of its AVX-512 units through supporting new sets of AVX-512 instructions as well as a small amount of silicon redesign. For pure performance metrics, this change means that Knights Mill offers only half of the double-precision performance of Knights Landing, but up to 2x in single precision and 4x with variable precision.</p><table border=0 width=85%><tbody readability=1><tr readability=2><td class=contentwhite colspan=8>Intel Xeon Phi x205 Family (Knights Mill)</td></tr><tr class=tlblue><td>&nbsp;</td><td>Cores</td><td>Base</td><td>Turbo</td><td>L2</td><td>TDP</td><td>DRAM</td><td>TCASE</td></tr><tr><td class=tlgrey>7295</td><td>72 / 288</td><td>1.50 GHz</td><td>1.60 GHz</td><td>36 MB</td><td>320W</td><td>DDR4-2400</td><td>77ºC</td></tr><tr><td class=tlgrey>7285</td><td>68 / 272</td><td>1.30 GHz</td><td>1.40 GHz</td><td>34 MB</td><td>250W</td><td>DDR4-2400</td><td>72ºC</td></tr><tr><td class=tlgrey>7235</td><td>64 / 256</td><td>1.30 GHz</td><td>1.40 GHz</td><td>32 MB</td><td>250W</td><td>DDR4-2133</td><td>72ºC</td></tr></tbody></table><p>The three parts are officially members of the Xeon Phi x205 family, and match their x200 family members where the product numbers align (eg 7290 and 7295). The 7295 has the most cores and threads, with a higher frequency, more total L2 cache, support for DDR4-2400 and the higher temperature support. The 7285 is the middle of the pack, while the low end 7235 gives up some memory support, with only up to DDR4-2133.</p><p>The previous generation parts had some integrated OmniPath fabric versions (such as the 7290F) which do not seem to have migrated over to Knights Mill yet, though could potentially in the future. Each of the parts are similar to KNL, using 36 tiles of two cores, all connected with the 2D mesh, and each tile sharing 1MB of L2 cache with one VPU per core.&nbsp;</p><p>On the specification side, everything seems pretty much by the book for core counts and frequencies. The one number that stands out is the 320W for the Xeon Phi 7295. This is a high power consumption number for a socketed processor, and if my memory serves me correctly, this is the highest TDP ever assigned to an Intel socketed CPU. This isn't the highest for a socketed processor though - IBM quoted 300-350W for&nbsp;<a href=#>its z14 hardware</a>&nbsp;earlier this year, although it can go up to 500W on consumer request. The reason for this dramatic increase in Intel’s TDP number (we suspect) is three-fold: one, to catch more processors off the production line into the relevant voltage/frequency window, and two, the new instructions offer better utilization of the silicon, and three: double-pumped execution.</p><table align=center border=0 cellpadding=0 cellspacing=1 width=680><tbody readability=4.4862288135593><tr readability=2><td align=center class=contentwhite colspan=7>AVX-512 Support Propogation by Various Intel CPUs</td></tr><tr class=tlblue><td width=186>&nbsp;</td><td align=center width=137>Xeon, Core X</td><td align=center width=136>General</td><td align=center width=136>Xeon Phi</td><td align=center width=136>&nbsp;</td></tr><tr readability=2><td class=tlgrey>Skylake-SP</td><td align=center>AVX512BW<br>AVX512DQ<br>AVX512VL</td><td align=center colspan=1 rowspan=2>AVX512F<br>AVX512CD</td><td align=center>AVX512ER<br>AVX512PF</td><td class=tlgrey>Knights Landing</td></tr><tr readability=2><td class=tlgrey>Cannon Lake</td><td align=center>AVX512VBMI<br>AVX512IFMA</td><td align=center colspan=1 rowspan=2>AVX512_4FMAPS<br>AVX512_4VNNIW</td><td class=tlgrey colspan=1 rowspan=2>Knights Mill</td></tr><tr readability=2><td class=tlgrey>Ice Lake</td><td align=center>AVX512_VNNI<br>AVX512_VBMI2<br>AVX512_BITALG<br>AVX512+VAES<br>AVX512+GFNI<br>AVX512+VPCLMULQDQ</td><td align=center>AVX512_VPOPCNTDQ</td></tr><tr readability=0.7304347826087><td colspan=5 rowspan=1>Source:&nbsp;<a href=#>Intel Architecture Instruction Set Extensions and Future Features Programming Reference</a>&nbsp;(pages 12 and 13)</td></tr></tbody></table><p>The two headline changes on instructions for the new parts revolve around support for Quad FMA (QFMA, or 4FMAPS) for 32-bit floating point, and Vector Neural Network Instructions (VNNI) for 16-bit integers. To do this required changing the execution ports on the core.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-010_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Previously each VPU per core would offer identical 512-bit interfaces to the AVX-512 unit, supporting single precision (SP) and double precision (DP) math, with any half-precision (HP) falling under an SP block. In the new design, the ports are asymmetrical: the SP/DP block is split into a separate DP and SP/VNNI blocks, with one DP block removed (likely due to the size of the SP/VNNI block). This is best shown in the diagram above, though it means that DP performance is halved (2 blocks to 1), but SP performance is doubled (2 blocks to 4) and VNNI performance is quadrupled (2 SP blocks to 4 HP blocks).</p><p>The QFMA implementation allows for sequential fused-multiply-add to accumulate over four sets of calculations with a single instruction. Technically this adds latency, so the calculation needs enough ILP to hide the latency, but offers a single target for the vector accumulator and allows packing together of 12 aligned cycles in DRAM. Each FMA takes about 3 cycles.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-005_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>For VNNI, the core takes two 16-bit integer inputs to give one 32-bit integer output for a horizontal dot product operation. The reason for using integer math here is two-fold: one, it enables 31-bits of INT prevision vs 24-bits of mantissa in FP, but also because IEEE standards are easier to implement in INT math.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-007_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Support for these new instructions and the silicon redesign means two things: one, the decoder potentially can work less, with more math being packed into a single instruction, but also caters to what Intel thought was a bottleneck in AVX-512 utilization: not enough codes were using all the AVX-512 unit all the time. This is designed to help increase utilization, and therefore would increase power consumption.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-017_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>The other part of the equation is double pumping the AVX-512 unit, ensuring that the unit is fed at all times while reducing decode power.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/hc29.21.420-knights-mill-bradford-intel-second-draft-page-009.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Overall the KNM core is looks almost identical to the KNL core, aside from the VPU port changes. It still decodes 2-ops per cycle but gives out-of-order execution with 72-inflight micro-ops. To hide a lot of the latency, 4-way hyperthreading is enabled, hence why a 64-core part gives 256 threads.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12172/c9zuc2uxcaaanmk2_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><br>Our KNL 7210 Sample</p><p>Intel’s major partners already have Knights Mill available for customers, although list pricing is currently not in Intel's Price List. It’s interesting that the data being added to Intel’s ARK platform wasn’t accompanied by any announcement, and seems to be a low-key affair.&nbsp;</p><p>Source:&nbsp;<a href=#>Wikichip on Twitter</a>,&nbsp;<a href=#>Intel ARK</a></p><h3>Additional</h3><p>Something we missed in our first look at the specifications. Over the older Knights Landing parts, the new Knights Mill parts also support Intel virtualization technologies, specifically VT-d, VT-x and EPT.</p><h3>Related Reading</h3><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZH5zfZZrZqKmpJq5brjIrKusZZujtqi006xkpqGcoXq5sc6nZKmgmWK8r3nAq6JmraBiwbB5lmtknKeimsBurdNmamtop2LEqsDHZqifpZFirq%2BwjK%2Blp6E%3D</p></div><div id=links><a href=./what-is-the-significance-of-cenchrea-in-the-bible-3.html>&#171;&nbsp;What is the significance of Cenchrea in the Bible?</a>
<a href=./transformation-karlie-kloss-childhood-31-years-old.html>The Transformation Of Karlie Kloss From Childhood To 31 Years Old&nbsp;&#187;</a></div></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>